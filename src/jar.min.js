//Jar.js - v0.0.1
//Author - Gautham R.
(function(){var a=this;a.jar={},jar.util={isObjectNullOrUndefined:function(a){return a?"object"!=typeof a?!1:!0:!1},replaceAll:function(a,t,e){return e.replace(RegExp(a,"g"),t)},injectScript:function(a){var t=document.createElement("script");t.type="text/javascript",t.onreadystatechange=function(){"loaded"==t.readyState&&(document.appendChild(t),console.log(classData.classname+" is loaded"))},t.src=a;var e=document.getElementsByTagName("script");if(e.length>0){var n=e[e.length-1];n.parentNode.insertBefore(t,n)}}},jar._import={file:function(a){if(!a)throw"Invalid class name";var t=a.split("."),e=0,n=jar._app.appPath;if(t&&t.length>2){var i=t[0],s=t[t.length-1];if(jar._app.name!=i)throw"Invalid Namespace";for(var l=t.length;l>e;e++)e>0&&l-1>e&&(n+="/"==n?t[e]:"/"+t[e]),e==l-1&&(n+="/"+t[e]+".js");return jar._app._setAppClassPathList({classname:s,path:n}),{classname:s,path:n}}throw"Invalid class name - "+a}},jar._module={collection:[],_add:function(a,t){this.collection.push({name:a,obj:t})},_fetch:function(a){for(var t=0;this.collection.length>t;t++){var e=this.collection[t];if(e.name==a)return e}return null}},jar._app={name:null,isInitialized:!1,appPath:"",classPathList:[],_isValidClass:function(a){for(var t=this.classPathList,e=0;t.length>e;e++){var n=t[e];if(a==n.classname)return!0}return!1},modules:[],_setModules:function(a){this.modules=a,this._loadModules()},_loadModules:function(){for(var a=this,t=a.modules,e=0;t.length>e;e++)jar._import.file(t[e]);this._attachModules()},_attachModules:function(){for(var a=this.classPathList,t=0;a.length>t;t++){var e=a[t],n=e.path;jar.util.injectScript(n)}},_setAppClassPathList:function(a){this.classPathList.push(a)},_setName:function(a){a&&(this.name=a)},_setAppPath:function(a){a&&(this.appPath=a)}},jar.app=function(a){if(!jar.util.isObjectNullOrUndefined(a))throw"invalid config object";a.name&&jar._app._setName(a.name),a.appPath?(jar._app._setAppPath(a.appPath),jar._app.isInitialized=!0):jar._app.isInitialized=!1,a.modules?(jar._app._setModules(a.modules),jar._app.isInitialized=!0):jar._app.isInitialized=!1,window.onload=function(){a.launch(jar._app)}},jar.store=function(a,t){if(!a&&!jar._isValidClass(a))throw"Invalid class name";if(!jar.util.isObjectNullOrUndefined(t))throw"Invalid class object for "+a;jar._module._add(a,t)},jar.grab=function(a){if(!a)throw"Invalid class name";var t=jar._module._fetch(a);if(t){var e={};return e=t.obj,e._name=a,e.init(),e}return null}})();